var Fe=Object.defineProperty,$e=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var Ce=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var be=(t,n,o)=>n in t?Fe(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,H=(t,n)=>{for(var o in n||(n={}))He.call(n,o)&&be(t,o,n[o]);if(Ce)for(var o of Ce(n))Ke.call(n,o)&&be(t,o,n[o]);return t},le=(t,n)=>$e(t,Be(n));import{j as k,a as _,S as We,R as w,P as p,b as T,r as O,c as ce,T as qe,d as Ge,e as Me,f as Ve,g as Le,h as Ye,i as Xe,C as Je}from"./vendor.abd0877e.js";const Qe=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(e){if(e.ep)return;e.ep=!0;const a=o(e);fetch(e.href,a)}};Qe();var et="/react-interview-exercise/assets/school.baf43267.png",tt="/react-interview-exercise/assets/search_points.253501ff.png",nt="/react-interview-exercise/assets/search.df93486b.png",ot="/react-interview-exercise/assets/submit.b9e7151e.png";const rt="_shapes_emedk_24",it="_globParent_emedk_48",st="_blob_emedk_52",at="_glob_emedk_2",lt="_glob1_emedk_60",ct="_glob2_emedk_60",ut="_move_emedk_1",ht="_input_wrapper_emedk_99",pt="_input_box_emedk_108";var xe={"glob-svg":"_glob-svg_emedk_2","glob-inner":"_glob-inner_emedk_8",shapes:rt,globParent:it,blob:st,glob:at,glob1:lt,glob2:ct,move:ut,input_wrapper:ht,input_box:pt};const dt=t=>{const{onChange:n=()=>{},value:o,placeholder:r}=t,e=({target:a})=>{const{value:i}=a;n(i)};return k(x,{center:!0,className:xe.input_wrapper,children:[_("img",{draggable:"false",style:{height:20,width:"auto",padding:"0 15px"},alt:"Search Icon",src:nt}),_("input",{type:"search",className:xe.input_box,placeholder:r,value:o,onChange:e})]})},_t="_search_button_wrapper_1uwkb_1";var ft={search_button_wrapper:_t};const mt=t=>{const{onClick:n=()=>{},children:o,isLoading:r=!1,id:e}=t,a=i=>{i.preventDefault(),n()};return _(x,{center:!0,className:ft.search_button_wrapper,children:_("button",{id:e,onClick:a,children:r?_(We,{}):o})})};var Se={exports:{}};(function(t){var n=Object.prototype.hasOwnProperty,o="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(o=!1));function e(s,c,u){this.fn=s,this.context=c,this.once=u||!1}function a(s,c,u,l,v){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new e(u,l||s,v),y=o?o+c:c;return s._events[y]?s._events[y].fn?s._events[y]=[s._events[y],g]:s._events[y].push(g):(s._events[y]=g,s._eventsCount++),s}function i(s,c){--s._eventsCount==0?s._events=new r:delete s._events[c]}function h(){this._events=new r,this._eventsCount=0}h.prototype.eventNames=function(){var c=[],u,l;if(this._eventsCount===0)return c;for(l in u=this._events)n.call(u,l)&&c.push(o?l.slice(1):l);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},h.prototype.listeners=function(c){var u=o?o+c:c,l=this._events[u];if(!l)return[];if(l.fn)return[l.fn];for(var v=0,g=l.length,y=new Array(g);v<g;v++)y[v]=l[v].fn;return y},h.prototype.listenerCount=function(c){var u=o?o+c:c,l=this._events[u];return l?l.fn?1:l.length:0},h.prototype.emit=function(c,u,l,v,g,y){var S=o?o+c:c;if(!this._events[S])return!1;var m=this._events[S],M=arguments.length,E,f;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),M){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,l),!0;case 4:return m.fn.call(m.context,u,l,v),!0;case 5:return m.fn.call(m.context,u,l,v,g),!0;case 6:return m.fn.call(m.context,u,l,v,g,y),!0}for(f=1,E=new Array(M-1);f<M;f++)E[f-1]=arguments[f];m.fn.apply(m.context,E)}else{var J=m.length,N;for(f=0;f<J;f++)switch(m[f].once&&this.removeListener(c,m[f].fn,void 0,!0),M){case 1:m[f].fn.call(m[f].context);break;case 2:m[f].fn.call(m[f].context,u);break;case 3:m[f].fn.call(m[f].context,u,l);break;case 4:m[f].fn.call(m[f].context,u,l,v);break;default:if(!E)for(N=1,E=new Array(M-1);N<M;N++)E[N-1]=arguments[N];m[f].fn.apply(m[f].context,E)}}return!0},h.prototype.on=function(c,u,l){return a(this,c,u,l,!1)},h.prototype.once=function(c,u,l){return a(this,c,u,l,!0)},h.prototype.removeListener=function(c,u,l,v){var g=o?o+c:c;if(!this._events[g])return this;if(!u)return i(this,g),this;var y=this._events[g];if(y.fn)y.fn===u&&(!v||y.once)&&(!l||y.context===l)&&i(this,g);else{for(var S=0,m=[],M=y.length;S<M;S++)(y[S].fn!==u||v&&!y[S].once||l&&y[S].context!==l)&&m.push(y[S]);m.length?this._events[g]=m.length===1?m[0]:m:i(this,g)}return this},h.prototype.removeAllListeners=function(c){var u;return c?(u=o?o+c:c,this._events[u]&&i(this,u)):(this._events=new r,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=o,h.EventEmitter=h,t.exports=h})(Se);var gt=Se.exports,vt=function t(n,o){if(n===o)return!0;if(n&&o&&typeof n=="object"&&typeof o=="object"){if(n.constructor!==o.constructor)return!1;var r,e,a;if(Array.isArray(n)){if(r=n.length,r!=o.length)return!1;for(e=r;e--!=0;)if(!t(n[e],o[e]))return!1;return!0}if(n.constructor===RegExp)return n.source===o.source&&n.flags===o.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===o.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===o.toString();if(a=Object.keys(n),r=a.length,r!==Object.keys(o).length)return!1;for(e=r;e--!=0;)if(!Object.prototype.hasOwnProperty.call(o,a[e]))return!1;for(e=r;e--!=0;){var i=a[e];if(!t(n[i],o[i]))return!1}return!0}return n!==n&&o!==o};const ke="__googleMapsScriptId";class j{constructor({apiKey:n,channel:o,client:r,id:e=ke,libraries:a=[],language:i,region:h,version:s,mapIds:c,nonce:u,retries:l=3,url:v="https://maps.googleapis.com/maps/api/js"}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.version=s,this.apiKey=n,this.channel=o,this.client=r,this.id=e||ke,this.libraries=a,this.language=i,this.region=h,this.mapIds=c,this.nonce=u,this.retries=l,this.url=v,j.instance){if(!vt(this.options,j.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(j.instance.options)}`);return j.instance}j.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let n=this.url;return n+=`?callback=${this.CALLBACK}`,this.apiKey&&(n+=`&key=${this.apiKey}`),this.channel&&(n+=`&channel=${this.channel}`),this.client&&(n+=`&client=${this.client}`),this.libraries.length>0&&(n+=`&libraries=${this.libraries.join(",")}`),this.language&&(n+=`&language=${this.language}`),this.region&&(n+=`&region=${this.region}`),this.version&&(n+=`&v=${this.version}`),this.mapIds&&(n+=`&map_ids=${this.mapIds.join(",")}`),n}deleteScript(){const n=document.getElementById(this.id);n&&n.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((n,o)=>{this.loadCallback(r=>{r?o(r.error):n(window.google)})})}loadCallback(n){this.callbacks.push(n),this.execute()}setScript(){if(document.getElementById(this.id)){this.callback();return}const n=this.createUrl(),o=document.createElement("script");o.id=this.id,o.type="text/javascript",o.src=n,o.onerror=this.loadErrorCallback.bind(this),o.defer=!0,o.async=!0,this.nonce&&(o.nonce=this.nonce),document.head.appendChild(o)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(n){if(this.errors.push(n),this.errors.length<=this.retries){const o=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${o} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},o)}else this.onerrorEvent=n,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(n=>{n(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var Z=U;function U(t,n){this.x=t,this.y=n}U.prototype={clone:function(){return new U(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,n){return this.clone()._rotateAround(t,n)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var n=t.x-this.x,o=t.y-this.y;return n*n+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,n){return Math.atan2(this.x*n-this.y*t,this.x*t+this.y*n)},_matMult:function(t){var n=t[0]*this.x+t[1]*this.y,o=t[2]*this.x+t[3]*this.y;return this.x=n,this.y=o,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var n=Math.cos(t),o=Math.sin(t),r=n*this.x-o*this.y,e=o*this.x+n*this.y;return this.x=r,this.y=e,this},_rotateAround:function(t,n){var o=Math.cos(t),r=Math.sin(t),e=n.x+o*(this.x-n.x)-r*(this.y-n.y),a=n.y+r*(this.x-n.x)+o*(this.y-n.y);return this.x=e,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};U.convert=function(t){return t instanceof U?t:Array.isArray(t)?new U(t[0],t[1]):t};function b(){return(b=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t}).apply(this,arguments)}function Q(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}function ue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var yt={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},wt=function(t){function n(){return t.apply(this,arguments)||this}Q(n,t);var o=n.prototype;return o.shouldComponentUpdate=function(){return!1},o.render=function(){return w.createElement("div",{ref:this.props.registerChild,style:yt})},n}(O.exports.Component),Ct=function(t){function n(r){var e;return(e=t.call(this)||this).gmapInstance=r,e}Q(n,t);var o=n.prototype;return o.getChildren=function(){return this.gmapInstance.props.children},o.getMousePosition=function(){return this.gmapInstance.mouse_},o.getUpdateCounter=function(){return this.gmapInstance.updateCounter_},o.dispose=function(){this.gmapInstance=null,this.removeAllListeners()},n}(gt),K=function(t,n){for(var o=b({},t),r=0;r<n.length;r++){var e=n[r];e in o&&delete o[e]}return o},bt=Object.prototype.hasOwnProperty;function De(t,n){return t===n?t!==0||n!==0||1/t==1/n:t!=t&&n!=n}function D(t,n){if(De(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var o=Object.keys(t),r=Object.keys(n);if(o.length!==r.length)return!1;for(var e=0;e<o.length;e++)if(!bt.call(n,o[e])||!De(t[o[e]],n[o[e]]))return!1;return!0}var Mt={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},Lt={width:0,height:0,left:0,top:0,backgroundColor:"transparent",position:"absolute"},ee=function(t){function n(r){var e;return(e=t.call(this,r)||this)._getState=function(){return{children:e.props.dispatcher.getChildren(),updateCounter:e.props.dispatcher.getUpdateCounter()}},e._onChangeHandler=function(){if(e.dimensionsCache_){var a=(e.state.children||[]).length,i=e._getState();e.setState(i,function(){return(i.children||[]).length!==a&&e._onMouseChangeHandler()})}},e._onChildClick=function(){e.props.onChildClick&&e.hoverChildProps_&&e.props.onChildClick(e.hoverKey_,e.hoverChildProps_)},e._onChildMouseDown=function(){e.props.onChildMouseDown&&e.hoverChildProps_&&e.props.onChildMouseDown(e.hoverKey_,e.hoverChildProps_)},e._onChildMouseEnter=function(a,i){e.dimensionsCache_&&(e.props.onChildMouseEnter&&e.props.onChildMouseEnter(a,i),e.hoverChildProps_=i,e.hoverKey_=a,e.setState({hoverKey:a}))},e._onChildMouseLeave=function(){if(e.dimensionsCache_){var a=e.hoverKey_;a!=null&&(e.props.onChildMouseLeave&&e.props.onChildMouseLeave(a,e.hoverChildProps_),e.hoverKey_=null,e.hoverChildProps_=null,e.setState({hoverKey:null}))}},e._onMouseAllow=function(a){a||e._onChildMouseLeave(),e.allowMouse_=a},e._onMouseChangeHandler=function(){e.allowMouse_&&e._onMouseChangeHandlerRaf()},e._onMouseChangeHandlerRaf=function(){if(e.dimensionsCache_){var a=e.props.dispatcher.getMousePosition();if(a){var i=[],h=e.props.getHoverDistance();if(w.Children.forEach(e.state.children,function(u,l){if(u&&(u.props.latLng!==void 0||u.props.lat!==void 0||u.props.lng!==void 0)){var v=u.key!=null?u.key:l,g=e.props.distanceToMouse(e.dimensionsCache_[v],a,u.props);g<h&&i.push({key:v,dist:g,props:u.props})}}),i.length){i.sort(function(u,l){return u.dist-l.dist});var s=i[0].key,c=i[0].props;e.hoverKey_!==s&&(e._onChildMouseLeave(),e._onChildMouseEnter(s,c))}else e._onChildMouseLeave()}else e._onChildMouseLeave()}},e._getDimensions=function(a){return e.dimensionsCache_[a]},e.dimensionsCache_={},e.hoverKey_=null,e.hoverChildProps_=null,e.allowMouse_=!0,e.state=b({},e._getState(),{hoverKey:null}),e}Q(n,t);var o=n.prototype;return o.componentDidMount=function(){this.props.dispatcher.on("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.on("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.on("kON_CLICK",this._onChildClick),this.props.dispatcher.on("kON_MDOWN",this._onChildMouseDown)},o.shouldComponentUpdate=function(r,e){return this.props.experimental===!0?!D(this.props,r)||!D(K(this.state,["hoverKey"]),K(e,["hoverKey"])):!D(this.props,r)||!D(this.state,e)},o.componentWillUnmount=function(){this.props.dispatcher.removeListener("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.removeListener("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.removeListener("kON_CLICK",this._onChildClick),this.props.dispatcher.removeListener("kON_MDOWN",this._onChildMouseDown),this.dimensionsCache_=null},o.render=function(){var r=this,e=this.props.style||Mt;this.dimensionsCache_={};var a=w.Children.map(this.state.children,function(i,h){if(i){if(i.props.latLng===void 0&&i.props.lat===void 0&&i.props.lng===void 0)return w.cloneElement(i,{$geoService:r.props.geoService,$onMouseAllow:r._onMouseAllow,$prerender:r.props.prerender});var s=i.props.latLng!==void 0?i.props.latLng:{lat:i.props.lat,lng:i.props.lng},c=r.props.insideMapPanes?r.props.geoService.fromLatLngToDivPixel(s):r.props.geoService.fromLatLngToCenterPixel(s),u={left:c.x,top:c.y};if(i.props.seLatLng!==void 0||i.props.seLat!==void 0&&i.props.seLng!==void 0){var l=i.props.seLatLng!==void 0?i.props.seLatLng:{lat:i.props.seLat,lng:i.props.seLng},v=r.props.insideMapPanes?r.props.geoService.fromLatLngToDivPixel(l):r.props.geoService.fromLatLngToCenterPixel(l);u.width=v.x-c.x,u.height=v.y-c.y}var g=r.props.geoService.fromLatLngToContainerPixel(s),y=i.key!=null?i.key:h;return r.dimensionsCache_[y]=b({x:g.x,y:g.y},s),w.createElement("div",{key:y,style:b({},Lt,u),className:i.props.$markerHolderClassName},w.cloneElement(i,{$hover:y===r.state.hoverKey,$getDimensions:r._getDimensions,$dimensionKey:y,$geoService:r.props.geoService,$onMouseAllow:r._onMouseAllow,$prerender:r.props.prerender}))}});return w.createElement("div",{style:e},a)},n}(O.exports.Component);ee.propTypes={geoService:p.any,style:p.any,distanceToMouse:p.func,dispatcher:p.any,onChildClick:p.func,onChildMouseDown:p.func,onChildMouseLeave:p.func,onChildMouseEnter:p.func,getHoverDistance:p.func,insideMapPanes:p.bool,prerender:p.bool},ee.defaultProps={insideMapPanes:!1,prerender:!1};var xt={width:"50%",height:"50%",left:"50%",top:"50%",margin:0,padding:0,position:"absolute"};function St(t){return w.createElement("div",{style:xt},w.createElement(ee,b({},t,{prerender:!0})))}var he,W,pe,kt=new Promise(function(t){pe=t}),Ee=function(t,n){if(!t)return kt;if(W)return W;t.libraries||(t.libraries=[]);var o=[].concat(t.libraries);if(n&&(o.length!==0&&o.includes("visualization")||o.push("visualization"),console.warn("heatmapLibrary will be deprecated in the future. Please use { libraries: ['visualization'] } in bootstrapURLKeys property instead")),typeof window=="undefined")throw new Error("google map cannot be loaded outside browser env");var r=t.key,e=function(a,i){if(a==null)return{};var h,s,c={},u=Object.keys(a);for(s=0;s<u.length;s++)i.indexOf(h=u[s])>=0||(c[h]=a[h]);return c}(t,["key"]);return he||(he=new j(b({apiKey:r||""},e,{libraries:o}))),W=he.load().then(function(){return pe(window.google.maps),window.google.maps}),pe(W),W};function Oe(t,n,o){var r=o-n;return t===o?t:((t-n)%r+r)%r+n}var A=function(){function t(n,o){if(isNaN(n)||isNaN(o))throw new Error("Invalid LatLng object: ("+n+", "+o+")");this.lat=+n,this.lng=+o}return t.prototype.wrap=function(){return new t(this.lat,Oe(this.lng,-180,180))},t}();A.convert=function(t){return t instanceof A?t:Array.isArray(t)?new A(t[0],t[1]):"lng"in t&&"lat"in t?new A(t.lat,t.lng):t};var Dt=function(){function t(r,e,a){this.tileSize=r||512,this._minZoom=e||0,this._maxZoom=a||52,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this.zoom=0,this.center=new A(0,0),this.angle=0}var n,o=t.prototype;return o.zoomScale=function(r){return Math.pow(2,r)},o.scaleZoom=function(r){return Math.log(r)/Math.LN2},o.project=function(r,e){return new Z(this.lngX(r.lng,e),this.latY(r.lat,e))},o.unproject=function(r,e){return new A(this.yLat(r.y,e),this.xLng(r.x,e))},o.lngX=function(r,e){return(180+r)*(e||this.worldSize)/360},o.latY=function(r,e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))*(e||this.worldSize)/360},o.xLng=function(r,e){return 360*r/(e||this.worldSize)-180},o.yLat=function(r,e){return 360/Math.PI*Math.atan(Math.exp((180-360*r/(e||this.worldSize))*Math.PI/180))-90},o.locationPoint=function(r){var e=this.project(r);return this.centerPoint._sub(this.point._sub(e)._rotate(this.angle))},o.pointLocation=function(r){var e=this.centerPoint._sub(r)._rotate(-this.angle);return this.unproject(this.point.sub(e))},(n=[{key:"minZoom",get:function(){return this._minZoom},set:function(r){this._minZoom=r,this.zoom=Math.max(this.zoom,r)}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(r){this._maxZoom=r,this.zoom=Math.min(this.zoom,r)}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerPoint",get:function(){return new Z(0,0)}},{key:"size",get:function(){return new Z(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(r){this.angle=-Oe(r,-180,180)*Math.PI/180}},{key:"zoom",get:function(){return this._zoom},set:function(r){var e=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}},{key:"x",get:function(){return this.lngX(this.center.lng)}},{key:"y",get:function(){return this.latY(this.center.lat)}},{key:"point",get:function(){return new Z(this.x,this.y)}}])&&function(r,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}(t.prototype,n),t}(),Et=function(){function t(o){this.hasSize_=!1,this.hasView_=!1,this.transform_=new Dt(o||512)}var n=t.prototype;return n.setView=function(o,r,e){this.transform_.center=A.convert(o),this.transform_.zoom=+r,this.transform_.bearing=+e,this.hasView_=!0},n.setViewSize=function(o,r){this.transform_.width=o,this.transform_.height=r,this.hasSize_=!0},n.setMapCanvasProjection=function(o,r){this.maps_=o,this.mapCanvasProjection_=r},n.canProject=function(){return this.hasSize_&&this.hasView_},n.hasSize=function(){return this.hasSize_},n.fromLatLngToCenterPixel=function(o){return this.transform_.locationPoint(A.convert(o))},n.fromLatLngToDivPixel=function(o){if(this.mapCanvasProjection_){var r=new this.maps_.LatLng(o.lat,o.lng);return this.mapCanvasProjection_.fromLatLngToDivPixel(r)}return this.fromLatLngToCenterPixel(o)},n.fromLatLngToContainerPixel=function(o){if(this.mapCanvasProjection_){var r=new this.maps_.LatLng(o.lat,o.lng);return this.mapCanvasProjection_.fromLatLngToContainerPixel(r)}var e=this.fromLatLngToCenterPixel(o);return e.x-=this.transform_.worldSize*Math.round(e.x/this.transform_.worldSize),e.x+=this.transform_.width/2,e.y+=this.transform_.height/2,e},n.fromContainerPixelToLatLng=function(o){if(this.mapCanvasProjection_){var r=this.mapCanvasProjection_.fromContainerPixelToLatLng(o);return{lat:r.lat(),lng:r.lng()}}var e=b({},o);e.x-=this.transform_.width/2,e.y-=this.transform_.height/2;var a=this.transform_.pointLocation(Z.convert(e));return a.lng-=360*Math.round(a.lng/360),a},n.getWidth=function(){return this.transform_.width},n.getHeight=function(){return this.transform_.height},n.getZoom=function(){return this.transform_.zoom},n.getCenter=function(){return this.transform_.pointLocation({x:0,y:0})},n.getBounds=function(o,r){var e=o&&o[0]||0,a=o&&o[1]||0,i=o&&o[2]||0,h=o&&o[3]||0;if(this.getWidth()-a-h>0&&this.getHeight()-e-i>0){var s=this.transform_.pointLocation(Z.convert({x:h-this.getWidth()/2,y:e-this.getHeight()/2})),c=this.transform_.pointLocation(Z.convert({x:this.getWidth()/2-a,y:this.getHeight()/2-i})),u=[s.lat,s.lng,c.lat,c.lng,c.lat,s.lng,s.lat,c.lng];return r&&(u=u.map(function(l){return Math.round(l*r)/r})),u}return[0,0,0,0]},t}();function Te(t){if(window.requestAnimationFrame)return window.requestAnimationFrame(t);var n=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return n?n(t):window.setTimeout(t,1e3/60)}var Ot=Math.log2?Math.log2:function(t){return Math.log(t)/Math.LN2};function Pe(t,n){return Object.keys(t).reduce(function(o,r){return n(t[r])&&(o[r]=t[r]),o},{})}var R=function(t){if(t!==null&&typeof t=="object"){if(Object.keys(t).length===0)return!0}else if(t==null||t==="")return!0;return!1},Tt=Object.prototype.toString;function te(t){return typeof t=="number"||function(n){return!!n&&typeof n=="object"}(t)&&Tt.call(t)==="[object Number]"}var ne=null;function ze(){if(ne)return ne;if(typeof navigator!="undefined"){var t=navigator.userAgent.indexOf("MSIE")>-1,n=navigator.userAgent.indexOf("Firefox")>-1,o=navigator.userAgent.toLowerCase().indexOf("op")>-1,r=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Safari")>-1;return r&&e&&(e=!1),r&&o&&(r=!1),ne={isExplorer:t,isFirefox:n,isOpera:o,isChrome:r,isSafari:e}}return ne={isChrome:!0,isExplorer:!1,isFirefox:!1,isOpera:!1,isSafari:!1}}var Ae=function(t){return Function.prototype.toString.call(t)};function q(t){if(!t||typeof t!="object")return!1;var n=typeof t.constructor=="function"?Object.getPrototypeOf(t):Object.prototype;if(n===null)return!0;var o=n.constructor;return typeof o=="function"&&o instanceof o&&Ae(o)===Ae(Object)}function G(t,n,o,r){t.addEventListener(n,o,function(){var e=!1;try{var a=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",a,a),window.removeEventListener("test",a,a)}catch{e=!1}return e}()?{capture:r,passive:!0}:r)}var P,de=!(typeof window=="undefined"||!window.document||!window.document.createElement);P=de?window:typeof self!="undefined"?self:void 0;var Ne,_e=typeof document!="undefined"&&document.attachEvent,Ie=!1;if(de&&!_e){var Pt=function(){var t=P.requestAnimationFrame||P.mozRequestAnimationFrame||P.webkitRequestAnimationFrame||function(n){return P.setTimeout(n,20)};return function(n){return t(n)}}(),zt=(Ne=P.cancelAnimationFrame||P.mozCancelAnimationFrame||P.webkitCancelAnimationFrame||P.clearTimeout,function(t){return Ne(t)}),fe=function(t){var n=t.__resizeTriggers__,o=n.firstElementChild,r=n.lastElementChild,e=o.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,e.style.width=o.offsetWidth+1+"px",e.style.height=o.offsetHeight+1+"px",o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight},je=function(t){var n=this;fe(this),this.__resizeRAF__&&zt(this.__resizeRAF__),this.__resizeRAF__=Pt(function(){(function(o){return o.offsetWidth!=o.__resizeLast__.width||o.offsetHeight!=o.__resizeLast__.height})(n)&&(n.__resizeLast__.width=n.offsetWidth,n.__resizeLast__.height=n.offsetHeight,n.__resizeListeners__.forEach(function(o){o.call(n,t)}))})},me=!1,ge="",ve="animationstart",ye="Webkit Moz O ms".split(" "),At="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" ");if(de){var Ze=document.createElement("fakeelement");if(Ze.style.animationName!==void 0&&(me=!0),me===!1){for(var V=0;V<ye.length;V++)if(Ze.style[ye[V]+"AnimationName"]!==void 0){ge="-"+ye[V].toLowerCase()+"-",ve=At[V],me=!0;break}}}var we="resizeanim",Nt="@"+ge+"keyframes "+we+" { from { opacity: 0; } to { opacity: 0; } } ",It=ge+"animation: 1ms "+we+"; "}var oe=T.createPortal!==void 0,Re=oe?T.createPortal:T.unstable_renderSubtreeIntoContainer,re=function(t){return q(t)?t:{lat:t[0],lng:t[1]}},Ue=function(t,n){return n<t?t:n},ie=function(t){function n(r){var e;if((e=t.call(this,r)||this)._getMinZoom=function(){if(e.geoService_.getWidth()>0||e.geoService_.getHeight()>0){var i=Math.ceil(e.geoService_.getWidth()/256)+2,h=Math.ceil(e.geoService_.getHeight()/256)+2,s=Math.max(i,h);return Math.ceil(Ot(s))}return 3},e._computeMinZoom=function(i){return R(i)?e._getMinZoom():i},e._mapDomResizeCallback=function(){if(e.resetSizeOnIdle_=!0,e.maps_){var i=e.props.center||e.props.defaultCenter,h=e.map_.getCenter();e.maps_.event.trigger(e.map_,"resize"),e.map_.setCenter(e.props.resetBoundsOnResize?i:h)}},e._setLayers=function(i){i.forEach(function(h){e.layers_[h]=new e.maps_[h],e.layers_[h].setMap(e.map_)})},e._renderPortal=function(){return w.createElement(ee,{experimental:e.props.experimental,onChildClick:e._onChildClick,onChildMouseDown:e._onChildMouseDown,onChildMouseEnter:e._onChildMouseEnter,onChildMouseLeave:e._onChildMouseLeave,geoService:e.geoService_,insideMapPanes:!0,distanceToMouse:e.props.distanceToMouse,getHoverDistance:e._getHoverDistance,dispatcher:e.markersDispatcher_})},e._initMap=function(){if(!e.initialized_){e.initialized_=!0;var i=re(e.props.center||e.props.defaultCenter);e.geoService_.setView(i,e.props.zoom||e.props.defaultZoom,0),e._onBoundsChanged();var h=b({},e.props.apiKey&&{key:e.props.apiKey},e.props.bootstrapURLKeys);e.props.googleMapLoader(h,e.props.heatmapLibrary).then(function(s){if(e.mounted_){var c,u,l=e.geoService_.getCenter(),v={zoom:e.props.zoom||e.props.defaultZoom,center:new s.LatLng(l.lat,l.lng)};e.props.heatmap.positions&&(Object.assign(ue(e),{heatmap:(c=s,u=e.props.heatmap,new c.visualization.HeatmapLayer({data:u.positions.reduce(function(C,I){var L=I.weight,z=L===void 0?1:L;return C.push({location:new c.LatLng(I.lat,I.lng),weight:z}),C},[])}))}),function(C,I){var L=I.options,z=L===void 0?{}:L;Object.keys(z).map(function(B){return C.set(B,z[B])})}(e.heatmap,e.props.heatmap));var g=Pe(s,q),y=typeof e.props.options=="function"?e.props.options(g):e.props.options,S=!R(e.props.draggable)&&{draggable:e.props.draggable},m=e._computeMinZoom(y.minZoom);e.minZoom_=m;var M=b({},{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3},{minZoom:m},y,v);e.defaultDraggableOption_=R(M.draggable)?e.defaultDraggableOption_:M.draggable;var E=b({},M,S);E.minZoom=Ue(E.minZoom,m);var f=new s.Map(T.findDOMNode(e.googleMapDom_),E);e.map_=f,e.maps_=s,e._setLayers(e.props.layerTypes);var J=s.version.match(/^3\.(\d+)\./),N=J&&Number(J[1]),d=ue(e),ae=Object.assign(new s.OverlayView,{onAdd:function(){var C=typeof screen!="undefined"?screen.width+"px":"2000px",I=typeof screen!="undefined"?screen.height+"px":"2000px",L=document.createElement("div");if(L.style.backgroundColor="transparent",L.style.position="absolute",L.style.left="0px",L.style.top="0px",L.style.width=C,L.style.height=I,d.props.overlayViewDivStyle){var z=d.props.overlayViewDivStyle;typeof z=="object"&&Object.keys(z).forEach(function(B){L.style[B]=z[B]})}this.getPanes().overlayMouseTarget.appendChild(L),d.geoService_.setMapCanvasProjection(s,ae.getProjection()),oe?d.setState({overlay:L}):Re(d,d._renderPortal(),L,function(){return d.setState({overlay:L})})},onRemove:function(){var C=d.state.overlay;C&&!oe&&T.unmountComponentAtNode(C),d.setState({overlay:null})},draw:function(){if(d.updateCounter_++,d._onBoundsChanged(f,s,!d.props.debounced),d.googleApiLoadedCalled_||(d._onGoogleApiLoaded({map:f,maps:s,ref:d.googleMapDom_}),d.googleApiLoadedCalled_=!0),d.mouse_){var C=d.geoService_.fromContainerPixelToLatLng(d.mouse_);d.mouse_.lat=C.lat,d.mouse_.lng=C.lng}d._onChildMouseMove(),d.markersDispatcher_&&(d.markersDispatcher_.emit("kON_CHANGE"),d.fireMouseEventOnIdle_&&d.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"))}});e.overlay_=ae,ae.setMap(f),e.props.heatmap.positions&&e.heatmap.setMap(f),e.props.onTilesLoaded&&s.event.addListener(f,"tilesloaded",function(){d._onTilesLoaded()}),s.event.addListener(f,"zoom_changed",function(){d.geoService_.getZoom()!==f.getZoom()&&(d.zoomAnimationInProgress_||(d.zoomAnimationInProgress_=!0,d._onZoomAnimationStart(f.zoom)),N<32)&&(new Date().getTime()-e.zoomControlClickTime_<300?Te(function(){return Te(function(){d.updateCounter_++,d._onBoundsChanged(f,s)})}):(d.updateCounter_++,d._onBoundsChanged(f,s)))}),s.event.addListener(f,"idle",function(){if(e.resetSizeOnIdle_){e._setViewSize();var C=e._computeMinZoom(y.minZoom);C!==e.minZoom_&&(e.minZoom_=C,f.setOptions({minZoom:C})),e.resetSizeOnIdle_=!1}d.zoomAnimationInProgress_&&(d.zoomAnimationInProgress_=!1,d._onZoomAnimationEnd(f.zoom)),d.updateCounter_++,d._onBoundsChanged(f,s),d.dragTime_=0,d.markersDispatcher_&&d.markersDispatcher_.emit("kON_CHANGE")}),s.event.addListener(f,"mouseover",function(){d.mouseInMap_=!0}),s.event.addListener(f,"click",function(){d.mouseInMap_=!0}),s.event.addListener(f,"mouseout",function(){d.mouseInMap_=!1,d.mouse_=null,d.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")}),s.event.addListener(f,"drag",function(){d.dragTime_=new Date().getTime(),d._onDrag(f)}),s.event.addListener(f,"dragend",function(){var C=s.event.addListener(f,"idle",function(){s.event.removeListener(C),d._onDragEnd(f)})}),s.event.addListener(f,"maptypeid_changed",function(){d._onMapTypeIdChange(f.getMapTypeId())})}}).catch(function(s){throw e._onGoogleApiLoaded({map:null,maps:null,ref:e.googleMapDom_}),console.error(s),s})}},e._onGoogleApiLoaded=function(){var i;e.props.onGoogleApiLoaded&&(i=e.props).onGoogleApiLoaded.apply(i,arguments)},e._getHoverDistance=function(){return e.props.hoverDistance},e._onDrag=function(){var i;return e.props.onDrag&&(i=e.props).onDrag.apply(i,arguments)},e._onDragEnd=function(){var i;return e.props.onDragEnd&&(i=e.props).onDragEnd.apply(i,arguments)},e._onMapTypeIdChange=function(){var i;return e.props.onMapTypeIdChange&&(i=e.props).onMapTypeIdChange.apply(i,arguments)},e._onZoomAnimationStart=function(){var i;return e.props.onZoomAnimationStart&&(i=e.props).onZoomAnimationStart.apply(i,arguments)},e._onZoomAnimationEnd=function(){var i;return e.props.onZoomAnimationEnd&&(i=e.props).onZoomAnimationEnd.apply(i,arguments)},e._onTilesLoaded=function(){return e.props.onTilesLoaded&&e.props.onTilesLoaded()},e._onChildClick=function(){var i;if(e.props.onChildClick)return(i=e.props).onChildClick.apply(i,arguments)},e._onChildMouseDown=function(i,h){e.childMouseDownArgs_=[i,h],e.props.onChildMouseDown&&e.props.onChildMouseDown(i,h,b({},e.mouse_))},e._onChildMouseUp=function(){var i;e.childMouseDownArgs_&&(e.props.onChildMouseUp&&(i=e.props).onChildMouseUp.apply(i,e.childMouseDownArgs_.concat([b({},e.mouse_)])),e.childMouseDownArgs_=null,e.childMouseUpTime_=new Date().getTime())},e._onChildMouseMove=function(){var i;e.childMouseDownArgs_&&e.props.onChildMouseMove&&(i=e.props).onChildMouseMove.apply(i,e.childMouseDownArgs_.concat([b({},e.mouse_)]))},e._onChildMouseEnter=function(){var i;if(e.props.onChildMouseEnter)return(i=e.props).onChildMouseEnter.apply(i,arguments)},e._onChildMouseLeave=function(){var i;if(e.props.onChildMouseLeave)return(i=e.props).onChildMouseLeave.apply(i,arguments)},e._setViewSize=function(){if(e.mounted_){if(document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)e.geoService_.setViewSize(window.innerWidth,window.innerHeight);else{var i=T.findDOMNode(e.googleMapDom_);e.geoService_.setViewSize(i.clientWidth,i.clientHeight)}e._onBoundsChanged()}},e._onWindowResize=function(){e.resetSizeOnIdle_=!0},e._onMapMouseMove=function(i){if(e.mouseInMap_){var h=new Date().getTime();h-e.mouseMoveTime_>50&&(e.boundingRect_=i.currentTarget.getBoundingClientRect()),e.mouseMoveTime_=h;var s=i.clientX-e.boundingRect_.left,c=i.clientY-e.boundingRect_.top;e.mouse_||(e.mouse_={x:0,y:0,lat:0,lng:0}),e.mouse_.x=s,e.mouse_.y=c;var u=e.geoService_.fromContainerPixelToLatLng(e.mouse_);e.mouse_.lat=u.lat,e.mouse_.lng=u.lng,e._onChildMouseMove(),h-e.dragTime_<100?e.fireMouseEventOnIdle_=!0:(e.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"),e.fireMouseEventOnIdle_=!1)}},e._onClick=function(){var i;return e.props.onClick&&!e.childMouseDownArgs_&&new Date().getTime()-e.childMouseUpTime_>300&&e.dragTime_===0&&(i=e.props).onClick.apply(i,arguments)},e._onMapClick=function(i){e.markersDispatcher_&&(e._onMapMouseMove(i),new Date().getTime()-e.dragTime_>100&&(e.mouse_&&e._onClick(b({},e.mouse_,{event:i})),e.markersDispatcher_.emit("kON_CLICK",i)))},e._onMapMouseDownNative=function(i){e.mouseInMap_&&e._onMapMouseDown(i)},e._onMapMouseDown=function(i){e.markersDispatcher_&&new Date().getTime()-e.dragTime_>100&&(e._onMapMouseMove(i),e.markersDispatcher_.emit("kON_MDOWN",i))},e._onMapMouseDownCapture=function(){ze().isChrome&&(e.zoomControlClickTime_=new Date().getTime())},e._onKeyDownCapture=function(){ze().isChrome&&(e.zoomControlClickTime_=new Date().getTime())},e._isCenterDefined=function(i){return i&&(q(i)&&te(i.lat)&&te(i.lng)||i.length===2&&te(i[0])&&te(i[1]))},e._onBoundsChanged=function(i,h,s){if(i){var c=i.getCenter();e.geoService_.setView([c.lat(),c.lng()],i.getZoom(),0)}if((e.props.onChange||e.props.onBoundsChange)&&e.geoService_.canProject()){var u=e.geoService_.getZoom(),l=e.geoService_.getBounds(),v=e.geoService_.getCenter();if(!function(y,S,m){if(y&&S){for(var M=0;M!==y.length;++M)if(Math.abs(y[M]-S[M])>1e-5)return!1;return!0}return!1}(l,e.prevBounds_)&&s!==!1){var g=e.geoService_.getBounds(e.props.margin);e.props.onBoundsChange&&e.props.onBoundsChange(e.centerIsObject_?b({},v):[v.lat,v.lng],u,l,g),e.props.onChange&&e.props.onChange({center:b({},v),zoom:u,bounds:{nw:{lat:l[0],lng:l[1]},se:{lat:l[2],lng:l[3]},sw:{lat:l[4],lng:l[5]},ne:{lat:l[6],lng:l[7]}},marginBounds:{nw:{lat:g[0],lng:g[1]},se:{lat:g[2],lng:g[3]},sw:{lat:g[4],lng:g[5]},ne:{lat:g[6],lng:g[7]}},size:e.geoService_.hasSize()?{width:e.geoService_.getWidth(),height:e.geoService_.getHeight()}:{width:0,height:0}}),e.prevBounds_=l}}},e._registerChild=function(i){e.googleMapDom_=i},e.mounted_=!1,e.initialized_=!1,e.googleApiLoadedCalled_=!1,e.map_=null,e.maps_=null,e.prevBounds_=null,e.heatmap=null,e.layers_={},e.mouse_=null,e.mouseMoveTime_=0,e.boundingRect_=null,e.mouseInMap_=!0,e.dragTime_=0,e.fireMouseEventOnIdle_=!1,e.updateCounter_=0,e.markersDispatcher_=new Ct(ue(e)),e.geoService_=new Et(256),e.centerIsObject_=q(e.props.center),e.minZoom_=3,e.defaultDraggableOption_=!0,e.zoomControlClickTime_=0,e.childMouseDownArgs_=null,e.childMouseUpTime_=0,e.googleMapDom_=null,e._isCenterDefined(e.props.center||e.props.defaultCenter)){var a=re(e.props.center||e.props.defaultCenter);e.geoService_.setView(a,e.props.zoom||e.props.defaultZoom,0)}return e.zoomAnimationInProgress_=!1,e.state={overlay:null},e}Q(n,t);var o=n.prototype;return o.componentDidMount=function(){var r=this;this.mounted_=!0,G(window,"resize",this._onWindowResize,!1),G(window,"keydown",this._onKeyDownCapture,!0);var e=T.findDOMNode(this.googleMapDom_);e&&G(e,"mousedown",this._onMapMouseDownNative,!0),G(window,"mouseup",this._onChildMouseUp,!1);var a=b({},this.props.apiKey&&{key:this.props.apiKey},this.props.bootstrapURLKeys);this.props.googleMapLoader(a,this.props.heatmapLibrary),setTimeout(function(){r._setViewSize(),r._isCenterDefined(r.props.center||r.props.defaultCenter)&&r._initMap()},0,this),this.props.resetBoundsOnResize&&function(i,h){if(i.parentNode===void 0){var s=document.createElement("div");i.parentNode=s}i=i.parentNode,_e?i.attachEvent("onresize",h):(i.__resizeTriggers__||(getComputedStyle(i).position=="static"&&(i.style.position="relative"),function(){if(!Ie){var c=(Nt||"")+".resize-triggers { "+(It||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',u=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css",l.styleSheet?l.styleSheet.cssText=c:l.appendChild(document.createTextNode(c)),u.appendChild(l),Ie=!0}}(),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=document.createElement("div")).className="resize-triggers",i.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',i.appendChild(i.__resizeTriggers__),fe(i),G(i,"scroll",je,!0),ve&&i.__resizeTriggers__.addEventListener(ve,function(c){c.animationName==we&&fe(i)})),i.__resizeListeners__.push(h))}(e,this._mapDomResizeCallback)},o.shouldComponentUpdate=function(r,e){return!D(K(this.props,["draggable"]),K(r,["draggable"]))||!D(this.state,e)},o.componentDidUpdate=function(r){var e=this;if(!this._isCenterDefined(r.center)&&this._isCenterDefined(this.props.center)&&setTimeout(function(){return e._initMap()},0),this.map_){var a=this.geoService_.getCenter();if(this._isCenterDefined(this.props.center)){var i=re(this.props.center),h=this._isCenterDefined(r.center)?re(r.center):null;(!h||Math.abs(i.lat-h.lat)+Math.abs(i.lng-h.lng)>1e-5)&&Math.abs(i.lat-a.lat)+Math.abs(i.lng-a.lng)>1e-5&&this.map_.panTo({lat:i.lat,lng:i.lng})}if(R(this.props.zoom)||Math.abs(this.props.zoom-r.zoom)>0&&this.map_.setZoom(this.props.zoom),!R(r.draggable)&&R(this.props.draggable)?this.map_.setOptions({draggable:this.defaultDraggableOption_}):D(r.draggable,this.props.draggable)||this.map_.setOptions({draggable:this.props.draggable}),!R(this.props.options)&&!D(r.options,this.props.options)){var s=Pe(this.maps_,q),c=typeof this.props.options=="function"?this.props.options(s):this.props.options;if("minZoom"in(c=K(c,["zoom","center","draggable"]))){var u=this._computeMinZoom(c.minZoom);c.minZoom=Ue(c.minZoom,u)}this.map_.setOptions(c)}D(this.props.layerTypes,r.layerTypes)||(Object.keys(this.layers_).forEach(function(l){e.layers_[l].setMap(null),delete e.layers_[l]}),this._setLayers(this.props.layerTypes)),this.heatmap&&!D(this.props.heatmap.positions,r.heatmap.positions)&&this.heatmap.setData(this.props.heatmap.positions.map(function(l){return{location:new e.maps_.LatLng(l.lat,l.lng),weight:l.weight}})),this.heatmap&&!D(this.props.heatmap.options,r.heatmap.options)&&Object.keys(this.props.heatmap.options).forEach(function(l){e.heatmap.set(l,e.props.heatmap.options[l])})}this.markersDispatcher_.emit("kON_CHANGE"),D(this.props.hoverDistance,r.hoverDistance)||this.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")},o.componentWillUnmount=function(){this.mounted_=!1;var r,e,a=T.findDOMNode(this.googleMapDom_);a&&a.removeEventListener("mousedown",this._onMapMouseDownNative,!0),window.removeEventListener("resize",this._onWindowResize),window.removeEventListener("keydown",this._onKeyDownCapture),window.removeEventListener("mouseup",this._onChildMouseUp,!1),this.props.resetBoundsOnResize&&(e=this._mapDomResizeCallback,r=(r=a).parentNode,_e?r.detachEvent("onresize",e):(r.__resizeListeners__.splice(r.__resizeListeners__.indexOf(e),1),r.__resizeListeners__.length||(r.removeEventListener("scroll",je),r.__resizeTriggers__=!r.removeChild(r.__resizeTriggers__)))),this.overlay_&&this.overlay_.setMap(null),this.maps_&&this.map_&&this.props.shouldUnregisterMapOnUnmount&&(this.map_.setOptions({scrollwheel:!1}),this.maps_.event.clearInstanceListeners(this.map_)),this.props.shouldUnregisterMapOnUnmount&&(this.map_=null,this.maps_=null),this.markersDispatcher_.dispose(),this.resetSizeOnIdle_=!1,this.props.shouldUnregisterMapOnUnmount&&(delete this.map_,delete this.markersDispatcher_)},o.render=function(){var r=this.state.overlay,e=r?null:w.createElement(St,{experimental:this.props.experimental,onChildClick:this._onChildClick,onChildMouseDown:this._onChildMouseDown,onChildMouseEnter:this._onChildMouseEnter,onChildMouseLeave:this._onChildMouseLeave,geoService:this.geoService_,insideMapPanes:!1,distanceToMouse:this.props.distanceToMouse,getHoverDistance:this._getHoverDistance,dispatcher:this.markersDispatcher_});return w.createElement("div",{style:this.props.style,onMouseMove:this._onMapMouseMove,onMouseDownCapture:this._onMapMouseDownCapture,onClick:this._onMapClick},w.createElement(wt,{registerChild:this._registerChild}),oe&&r&&Re(this._renderPortal(),r),e)},n}(O.exports.Component);ie.propTypes={apiKey:p.string,bootstrapURLKeys:p.any,defaultCenter:p.oneOfType([p.array,p.shape({lat:p.number,lng:p.number})]),center:p.oneOfType([p.array,p.shape({lat:p.number,lng:p.number})]),defaultZoom:p.number,zoom:p.number,onBoundsChange:p.func,onChange:p.func,onClick:p.func,onChildClick:p.func,onChildMouseDown:p.func,onChildMouseUp:p.func,onChildMouseMove:p.func,onChildMouseEnter:p.func,onChildMouseLeave:p.func,onZoomAnimationStart:p.func,onZoomAnimationEnd:p.func,onDrag:p.func,onDragEnd:p.func,onMapTypeIdChange:p.func,onTilesLoaded:p.func,options:p.any,distanceToMouse:p.func,hoverDistance:p.number,debounced:p.bool,margin:p.array,googleMapLoader:p.any,onGoogleApiLoaded:p.func,yesIWantToUseGoogleMapApiInternals:p.bool,draggable:p.bool,style:p.any,resetBoundsOnResize:p.bool,layerTypes:p.arrayOf(p.string),shouldUnregisterMapOnUnmount:p.bool},ie.defaultProps={distanceToMouse:function(t,n){return Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))},hoverDistance:30,debounced:!0,options:function(){return{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3}},googleMapLoader:Ee,yesIWantToUseGoogleMapApiInternals:!1,style:{width:"100%",height:"100%",margin:0,padding:0,position:"relative"},layerTypes:[],heatmap:{},heatmapLibrary:!1,shouldUnregisterMapOnUnmount:!0},ie.googleMapLoader=Ee;const jt="AIzaSyA6ybJwxJZgd0t91Xx_QEr_4FU5hph0ifM";var Zt={};const Rt=t=>_("img",{src:et,className:Zt.waypoint,style:{height:"1rem",width:"1rem"}}),Ut="_map_wrapper_1ddsa_1";var Ft={map_wrapper:Ut};const $t=t=>{var n;return _(x,{className:Ft.map_wrapper,children:_(ie,{bootstrapURLKeys:{key:jt},defaultCenter:t.center,defaultZoom:t.zoom,yesIWantToUseGoogleMapApiInternals:!0,children:(n=t==null?void 0:t.locations)==null?void 0:n.map((o,r)=>_(Rt,{lat:o.LAT,lng:o.LON,text:"Waypoint"},r))})})},x=w.memo(t=>_("div",{className:t.className,id:t.id,ref:t.ref,style:H({boxSizing:"border-box",display:t.inline?"inline-flex":"flex",cursor:t.onClick?"pointer":void 0,flexDirection:t.column?"column":"row",justifyContent:(t.center?"center":void 0)||t.justify||void 0,flexWrap:t.wrap?"wrap":"nowrap",alignItems:(t.center?"center":void 0)||t.align||void 0},t.style),onBlur:t.onBlur,onClick:t.onClick,onFocus:t.onFocus,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,children:t.children})),Bt="_shapes_1ow99_24",Ht="_globParent_1ow99_48",Kt="_blob_1ow99_52",Wt="_glob_1ow99_2",qt="_glob1_1ow99_60",Gt="_glob2_1ow99_60",Vt="_move_1ow99_1",Yt="_landing_wrapper_1ow99_99",Xt="_copy_section_1ow99_112",Jt="_accent_1ow99_116",Qt="_grabber_1ow99_128";var Y={"glob-svg":"_glob-svg_1ow99_2","glob-inner":"_glob-inner_1ow99_8",shapes:Bt,globParent:Ht,blob:Kt,glob:Wt,glob1:qt,glob2:Gt,move:Vt,landing_wrapper:Yt,copy_section:Xt,accent:Jt,grabber:Qt};const en=()=>(O.exports.useEffect(()=>{ce().reveal("#landing_copy",{opacity:.2,viewFactor:.3,scale:.9,delay:0,reset:!1,distance:"50px",origin:"left"}),ce().reveal("#landing_image",{opacity:.2,viewFactor:.3,scale:.9,delay:0,reset:!1,distance:"50px",origin:"right"})},[]),k(x,{justify:"space-evenly",className:Y.landing_wrapper,children:[k(x,{id:"landing_copy",className:Y.copy_section,center:!0,column:!0,children:[k("h1",{children:["Find a school that ",_("br",{})," ",_("b",{children:"transforms people."})]}),_("div",{className:Y.accent}),_("span",{className:Y.grabber,children:"CharacterStrong aims to provide resources for professional learning services that positively impact lives."})]}),_(x,{className:Y.image_section,id:"landing_image",center:!0,style:{flex:1},children:_("img",{draggable:"false",alt:"Landing Search Points",src:tt})})]})),tn="_header_wrapper_1v6qf_1";var nn={header_wrapper:tn};const on=()=>k(x,{id:"app-header",row:!0,className:nn.header_wrapper,align:"center",justify:"space-between",children:[_(sn,{}),_(x,{justify:"flex-end",style:{alignSelf:"flex-start",flex:1}})]});var rn="/react-interview-exercise/assets/header_logo.1094da8d.png";const sn=()=>_(x,{style:{padding:"20px"},children:_("img",{onClick:()=>window.open("https://characterstrong.com","_blank"),draggable:"false",style:{height:50,width:"auto"},alt:"CharacterStrong Logo",src:rn})}),X=t=>t||"---",an="_list_item_wrapper_5oxoq_1",ln="_school_name_5oxoq_14",cn="_location_5oxoq_18",un="_school_type_wrapper_5oxoq_22",hn="_school_type_5oxoq_22";var F={list_item_wrapper:an,school_name:ln,location:cn,school_type_wrapper:un,school_type:hn};const pn=w.memo(t=>{const{data:n}=t;return O.exports.useEffect(()=>{ce().reveal("#school_list_item",{opacity:.2,viewFactor:.3,scale:.9,delay:0,reset:!1,distance:"50px",origin:"left"})},[]),k(x,{id:"school_list_item",className:F.list_item_wrapper,center:!0,column:!0,children:[_("span",{className:F.school_name,children:X(n==null?void 0:n.NAME)}),_("span",{className:F.location,children:X(n==null?void 0:n.STREET)}),_("span",{className:F.location,children:`${X(n==null?void 0:n.CITY)}, ${X(n==null?void 0:n.STATE)} ${X(n==null?void 0:n.ZIP)}`}),_(x,{className:F.school_type_wrapper,children:_("span",{className:F.school_type,style:{background:(n==null?void 0:n.private)?"#EB72A2":"#2DA7CB"},children:(n==null?void 0:n.private)?"Private":"Public"})})]})}),dn="_tab_1gw0b_1",_n="_tabs_1gw0b_14",fn="_tab_list_1gw0b_23";var se={tab:dn,tabs:_n,tab_list:fn};const mn=t=>{const{children:n,locations:o}=t;return k(qe,{className:se.tabs,isLazy:!0,variant:"soft-rounded",colorScheme:"cyan",children:[k(Ge,{className:se.tab_list,children:[_(Me,{children:_("span",{className:se.tab,children:"List View"})}),_(Me,{children:_("span",{className:se.tab,children:"Map View"})})]}),k(Ve,{children:[_(Le,{style:{width:"100vw",display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center"},children:n}),_(Le,{style:{width:"100vw"},children:_($t,{zoom:4,center:{lat:39.06718,lng:-94.588878},locations:o})})]})]})},gn="_school_list_wrapper_j6qmv_1",vn="_search_wrapper_j6qmv_7",yn="_school_count_j6qmv_12",wn="_num_schools_j6qmv_16",Cn="_search_error_j6qmv_22";var $={school_list_wrapper:gn,search_wrapper:vn,school_count:yn,num_schools:wn,search_error:Cn};const bn=t=>{const{data:n,value:o,onChange:r=()=>{},onClick:e=()=>{},isLoading:a,locations:i,id:h}=t,s=O.exports.useCallback(()=>(n==null?void 0:n.length)?(n==null?void 0:n.length)!==1?_("h3",{className:$.num_schools,children:`${n.length} schools found`}):_("h3",{className:$.num_schools,children:`${n.length} school found`}):_("h3",{className:$.search_error,children:`${n.length} schools found`}),[n]);return k(x,{center:!0,wrap:!0,className:$.school_list_wrapper,children:[_(x,{center:!0,className:$.school_count,children:_(Ye,{initialScale:.9,in:!a,children:_(s,{})})}),k(x,{center:!0,className:$.search_wrapper,children:[_(dt,{placeholder:"Search a school or city",value:o,onChange:r}),_(mt,{id:h,isLoading:a,onClick:e,children:_("img",{draggable:"false",style:{height:30,width:"auto"},alt:"Search Icon",src:ot})})]}),_(mn,{children:n==null?void 0:n.map(c=>_(pn,{data:c})),locations:i})]})},Mn=async(t,n)=>{let o=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Private_School_Locations_Current/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${t}%')${n?`%20AND%20LEAID%20%3D%20'${n}'`:""}&outFields=*&outSR=4326&f=json`,r=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Public_School_Location_201819/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${t}%')${n?`%20AND%20LEAID%20%3D%20'${n}'`:""}&outFields=*&outSR=4326&f=json`,e=[],a=await(await fetch(o)).json(),i=await(await fetch(r)).json();return e=[...a.features?a.features.map(h=>le(H({},h.attributes),{private:!0})):[],...i.features?i.features.map(h=>le(H({},h.attributes),{private:!1})):[]],e},Ln=()=>{const[t,n]=w.useState(!1),[o,r]=O.exports.useState(""),[e,a]=O.exports.useState(""),[i,h]=w.useState([]),[s,c]=w.useState([]),u=O.exports.useCallback(async()=>{n(!0);const v=e?await Mn(e):[];c(v),n(!1)},[s,i,e,o]),l=O.exports.useCallback(v=>a(v),[]);return O.exports.useEffect(()=>{const v=g=>{if(g.code==="Enter"||g.code==="NumpadEnter")try{g.preventDefault(),u()}catch(y){console.error("Something went wrong with your search ",y)}};return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[s,i,e,o]),k(x,{column:!0,style:{width:"100%"},children:[_(en,{}),_(x,{style:{width:"100%"},children:_(bn,{id:"search_button",isLoading:t,onClick:u,value:e,onChange:l,locations:s,data:s})})]})};function xn(){return k(x,{center:!0,column:!0,style:{overflow:"hidden"},children:[_(on,{}),_(Ln,{})]})}const Sn={baseStyle:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},variants:{rounded:{padding:8,borderRadius:"40px",boxShadow:"xl",border:"2px solid"},smooth:{padding:6,borderRadius:"base",boxShadow:"md"}},defaultProps:{variant:"smooth"}},kn={baseStyle:{fontWeight:"bold",borderRadius:"25px",_hover:{bg:"black"}},sizes:{sm:{fontSize:"sm",px:4,py:3},md:{fontSize:"md",px:6,py:4}},variants:{outline:{border:"2px solid"},ghost:{border:"0px solid"},solid:{color:"white"}},defaultProps:{size:"md",variant:"outline"}},Dn={baseStyle:{bg:"white"}};var En=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:kn,Input:Dn});const On={brand:{green:"#42E794",darkGreen:"#1E7B75",red:"#FF4658",orange:"#FF6105",lightBlue:"#2ab8ff",darkBlue:"#1467FF",blue:"#2AB8FF",purple:"#630CB2",yellow:"#fff95e",teal:"#43D4FF"},blue:{500:"#2ab8ff",600:"#1467FF"},yellow:{100:"#fff95e"},red:{100:"#ff4658"},pink:{100:"#e748b9"}},Tn=Xe({colors:On,components:H({Card:Sn},En)});T.render(_(w.StrictMode,{children:_(Je,{theme:Tn,children:_(xn,{})})}),document.getElementById("root"));
